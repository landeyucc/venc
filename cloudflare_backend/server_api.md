# Venc 应用服务端API数据格式

本文档描述了Venc应用发送到配置服务器的JSON数据格式。

## 数据发送机制

- 数据通过HTTP POST请求发送到用户配置的服务器URL
- 请求头为`Content-Type: application/json`
- 实际发送的字段取决于用户在配置中启用的选项
- 如果没有配置服务器URL或所有发送选项都被禁用，则不会发送任何数据

## 加密操作JSON示例

### 所有选项都启用时
```json
{
  "filename": "document.pdf",
  "size": 2097152,
  "uuid": "123e4567-e89b-12d3-a456-426614174000",
  "password": "MySecurePassword123"
}
```

### 只发送文件名和大小
```json
{
  "filename": "image.jpg",
  "size": 1048576
}
```

### 只发送文件名
```json
{
  "filename": "archive.zip"
}
```

### 只发送UUID和密码（当使用随机文件名时）
```json
{
  "uuid": "123e4567-e89b-12d3-a456-426614174000",
  "password": "AnotherSecurePassword456"
}
```

## 解密操作JSON示例

### 使用密码模式，发送文件名和密码
```json
{
  "filename": "document.venc",
  "size": 2500000,
  "password": "DecryptionPassword456"
}
```

### 使用密钥文件模式，发送所有启用的选项
```json
{
  "filename": "archive.venc",
  "size": 5242880
}
```

### 只发送文件大小
```json
{
  "size": 15728640
}
```

## 字段说明

| 字段名 | 数据类型 | 描述 | 出现场景 |
|-------|---------|------|---------|
| filename | 字符串 | 原始文件名或加密文件名 | 加密和解密操作（当启用发送文件名选项时） |
| size | 数字 | 文件大小（字节） | 加密和解密操作（当启用发送文件大小选项时） |
| uuid | 字符串 | 随机生成的UUID（用于随机文件名） | 仅加密操作（当同时启用发送UUID和使用随机文件名选项时） |
| password | 字符串 | 用户输入的加密或解密密码 | 加密操作（当启用发送密码选项时）或解密操作（当使用密码模式并启用发送密码选项时） |

## 注意事项

1. 所有敏感信息（如密码）会以明文形式发送，请确保服务器连接使用HTTPS加密
2. 建议在服务端实现数据验证和安全处理机制
3. 客户端发送失败不会影响主流程，服务端应当做好容错处理